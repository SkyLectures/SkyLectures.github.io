{% assign color       = include.color       %}
{% assign theme_color = include.theme_color %}

{% comment %}
  Sass 함수 대신 Jekyll(Liquid) 내부에서 미리 HSL 값을 추출합니다.
  이 방식은 서버(Jekyll 3)와 로컬(Jekyll 4) 모두에서 동일하게 작동합니다.
{% endcomment %}
{% assign hsl_values = theme_color | color_to_hsl | split: '(' | last | split: ')' | first | split: ',' %}
{% assign h = hsl_values[0] %}
{% assign s = hsl_values[1] | replace: '%', '' | plus: 0.0 %}
{% assign l = hsl_values[2] %}

{% comment %} 채도를 8로 나누는 계산 수행 {% endcomment %}
{% assign s_div_8 = s | divided_by: 8.0 %}

html {
  --accent-color: {{ color }};
  /* 투명도와 어둡기 조절은 표준 CSS rgb/rgba 또는 고정값 출력을 권장합니다 */  
  --accent-color-faded: {{ color | color_modify: 'alpha', 0.5 }};
  --accent-color-highlight: {{ color | color_modify: 'alpha', 0.1 }};
  --accent-color-darkened: {{ color | color_darken: 7.5 }};

  --theme-color: {{ theme_color }};

  /* Sass 함수를 전혀 쓰지 않고 오직 숫자와 CSS 변수만 출력합니다 */
  --dark-mode-body-bg: hsl({{ h }}, {{ s_div_8 }}%, 17.5%);
  --dark-mode-border-color: hsl({{ h }}, {{ s_div_8 }}%, 22.5%);
}
