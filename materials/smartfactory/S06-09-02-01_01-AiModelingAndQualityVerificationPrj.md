---
layout: page
title:  "실습 프로젝트: AI 모델링 및 품질 검증"
date:   2025-03-01 10:00:00 +0900
permalink: /materials/S06-09-02-01_01-AiModelingAndQualityVerificationPrj
categories: materials
---
* toc
{:toc .large-only .toc-sticky:true}

## 1. 프로젝트 개요

> - 이 실습은 스마트팩토리 환경에서 AI 모델을 개발하고, ISO 9001 품질경영시스템에 따라 체계적으로 검증하는 전 과정을 경험할 수 있도록 설계됨
> - 실제 제조 현장에서 발생하는 문제를 AI로 해결하고, 그 과정과 결과를 ISO 9001에 부합하는 방식으로 문서화하는 능력을 기를 수 있음

### 1.1 프로젝트 목표

> - AI 기반 품질 예측 모델 개발 및 검증 전 과정을 ISO 9001 품질경영시스템에 부합하게 수행
> - 스마트팩토리 데이터를 활용한 AI 모델링 및 품질 검증 역량 향상
> - 품질 관련 문서화 능력 강화 및 체계적인 프로젝트 관리 역량 개발

> - **최종 제출물**
> 1. 수업 중 사용했던 MNIST, HouseSales 데이터셋을 이용하여 메타모픽 테스트, 뉴런 커버리지 테스트, 최대 안전 반경 테스트, 커버리지 검증 등을 수행하고, 테스트 결과를 분석하여 코드와 함께 제출
> 2. 본 문서에서 제시된 시나리오와 정보를 기반으로 실제 문제를 어떻게 해결할지 '계획'과 '제안'에 대한 심층적인 분석과 아이디어가 담긴 보고서를 작성하여 제출
{: .summary-quote}

### 1.2 실습 시나리오

> - **회사명:** (주)스마트솔루션
> - **산업:** 자동차 부품 제조
> - **문제 상황:** 엔진 부품 생산 라인에서 금속 주조 결함(기공, 균열 등) 발생률이 1.2%로, 업계 표준(0.5% 이하)보다 높은 상황
> - **목표:** AI 기반 주조 결함 예측 시스템을 개발하여 결함률을 0.4% 이하로 낮추기


## 2. 계획 단계

- **내용: AI 모델링 및 품질 검증 계획서 작성**

### 2.1 문서 정보

| 문서명 | AI 기반 주조 결함 예측 시스템 개발 계획서 |
| :--- | :--- |
| 문서번호 | QMS-AI-PL-001 |
| 버전 | 1.0 |
| 작성일 | 2025.10.03 |
| 작성자 | 품질관리팀 |
| 승인자 | CTO |

### 2.2 프로젝트 목표 및 범위

- **목표**
    - 주조 공정 데이터를 활용한 AI 기반 결함 예측 모델 개발
    - 주조 결함률을 현재 1.2%에서 0.4% 이하로 감소 (6개월 내)
    - ISO 9001 요구사항을 충족하는 AI 모델 검증 체계 구축

- **범위**
    - 적용 대상: A라인 엔진 블록 주조 공정
    - 데이터 범위: 온도, 압력, 금속 조성, 냉각 시간 등 20개 공정 변수
    - 기간: 2025.10.25 ~ 2026.04.15 (6개월)

### 2.3 AI 모델링 전략

- **데이터 수집 계획**
    - IoT 센서 20개 추가 설치 (기존 30개 + 신규 20개)
    - 데이터 수집 주기: 1초 간격
    - 데이터 저장 기간: 최소 2년 (품질 이력 추적 목적)
    - 수집 데이터 종류: 공정 변수, 설비 상태, 결함 검사 결과

- **AI 모델 개발 접근법**
    - 지도학습 기반 분류 모델 (정상/결함 예측)
    - 후보 알고리즘: Random Forest, XGBoost, Deep Neural Network
    - 성능 목표: 정확도 95% 이상, F1 Score 0.9 이상
    - 모델 업데이트 주기: 매월 1회 재학습

### 2.4 품질 검증 전략

- **모델 검증 방법론**
    - 교차 검증 (K-fold Cross Validation)
    - 테스트 데이터셋 (전체 데이터의 20%)을 통한 성능 평가
    - 실제 생산 환경에서의 Shadow Testing (2주간)

- **품질 지표 및 목표**
    - 모델 정확도 (Accuracy): 95% 이상
    - 정밀도 (Precision): 90% 이상
    - 재현율 (Recall): 90% 이상
    - F1 Score: 0.9 이상
    - 오탐률 (False Positive Rate): 5% 이하

### 2.5 리스크 및 대응 계획

| 리스크 | 영향도 | 발생가능성 | 대응 방안 | ISO 9001 연계 |
| :--- | :--- | :--- | :--- | :--- |
| 데이터 품질 저하 | 상 | 중 | 데이터 검증 파이프라인 구축, 이상치 자동 감지 | 7.1.5 모니터링 및 측정 자원 |
| AI 모델 과적합 | 중 | 중 | 정규화 기법 적용, 교차 검증 | 8.3 설계 및 개발 |
| 시스템 통합 문제 | 중 | 하 | 단계적 통합 및 회귀 테스트 | 8.3.4 설계 및 개발 관리 |
| 사용자 저항 | 중 | 중 | 사용자 교육 및 변화 관리 | 7.3 인식 |

### 2.6 자원 계획

- **인적 자원**
    - 데이터 과학자: 2명 (AI 모델 개발)
    - 품질 엔지니어: 1명 (품질 검증)
    - 현장 엔지니어: 1명 (데이터 수집 및 검증)
    - IT 전문가: 1명 (시스템 통합)

- **기술 인프라**
    - 데이터 수집: 추가 IoT 센서 20개 (금속 조성 분석, 냉각수 유량 등)
    - 데이터 저장: 클라우드 기반 데이터 레이크 (AWS S3 또는 Azure Blob Storage)
    - 모델 개발: GPU 지원 워크스테이션 또는 클라우드 기반 ML 플랫폼
    - 모델 배포: 엣지 디바이스 (납땜 공정 PLC 연동)
    - 네트워크: OT/IT 망 분리, 5G Private Network 구축 검토
    - 소프트웨어: Python ML 라이브러리 (Scikit-learn, TensorFlow/PyTorch), Jupyter Notebook, MLOps 플랫폼

- **예산**
    - (가상으로 프로젝트 예산 1억 원 책정 및 각 항목별 할당)

---

## 3. AI 모델링 단계 (DO)

### 3.1 문서 정보

| 문서명 | AI 주조 결함 예측 모델 개발 보고서 |
| :--- | :--- |
| 문서번호 | QMS-AI-DEV-001 |
| 버전 | 1.0 |
| 작성일 | 2026.01.15 |
| 작성자 | 데이터 과학자 팀 |
| 승인자 | R&D 총괄 |

### 3.2 데이터 수집 및 전처리

- **실제 데이터 수집**
    - 계획서에 따라 3개월간 A라인 주조 공정의 50개 변수 데이터를
        - 온도 10개, 압력 8개, 금속 조성 5개, 냉각 시간 3개, 기타 24개
    - IoT 센서와 MES로부터 1초 간격으로 수집 완료
    - 총 7,776,000건/변수, 약 380GB 규모

- **데이터 정제**
    - 결측치 처리: 센서 고장으로 인한 결측치(약 0.5%)는 이전 값으로 대체(Forward Fill) 후 평균값으로 보정
    - 이상치 처리: 통계적 방법(IQR) 및 전문가 판단(납땜기 임계 온도 초과 등)으로 이상치(약 1% 미만) 제거 또는 변환
    - 데이터 불균형 처리: 주조 결함(불량) 데이터가 정상 데이터 대비 1:99로 불균형하여, 오버샘플링(SMOTE) 기법 적용

- **특성 공학 (Feature Engineering)**
    - 원시 데이터 기반으로 새로운 특성을 생성하여 모델의 예측력 향상
        - 예: 공정 변수의 변화율, 특정 시간 동안의 평균/최대값

### 3.3 AI 모델 개발 및 훈련

- **모델 선정**
    - 초기 테스트 결과, XGBoost 모델이 가장 높은 성능(정확도 89%, F1 Score 0.78)을 보였음
    - 해석 가능성 측면에서 Random Forest 모델도 함께 후보로 선정
    - 최종적으로 **XGBoost 모델**을 선정

- **모델 아키텍처 및 하이퍼파라미터 최적화**
    - Grid Search, Random Search 등을 통해 최적의 하이퍼파라미터 탐색

- **모델 훈련**
    - 과거 3개월치 데이터(전처리 완료) 중 80%를 훈련 데이터셋으로 사용
    - 20%는 검증 데이터셋으로 사용

- **중간 검증 결과**
    - 훈련 데이터셋 및 검증 데이터셋에서 정확도 92%, F1 Score 0.85 달성

### 3.4 모델 버전 관리

- MLOps 플랫폼을 활용하여 모델의 코드, 학습 데이터, 하이퍼파라미터, 성능 지표 등을 체계적으로 관리
- 각 모델 버전별 변경 이력 기록

---

## 4. 품질 검증 단계 (CHECK)

### 4.1 문서 정보

| 문서명 | AI 주조 결함 예측 모델 품질 검증 보고서 |
| :--- | :--- |
| 문서번호 | QMS-AI-VAL-001 |
| 버전 | 1.0 |
| 작성일 | 2026.02.15 |
| 작성자 | 품질관리팀, 데이터 과학자 팀 |
| 승인자 | 품질 담당 이사 |

### 4.2 모델 성능 평가

- ISO 9001 9.1 성과 평가
- **테스트 데이터셋 성능**
    - 새롭게 수집된 1개월치 데이터(모델 훈련에 사용되지 않은)를 테스트 데이터셋으로 활용
    - **정확도:** 93.5% (목표 95% 미달)
    - **정밀도:** 91.2% (목표 90% 이상 달성)
    - **재현율:** 89.8% (목표 90% 미달)
    - **F1 Score:** 0.905 (목표 0.9 이상 달성)
    - **오탐율 (False Positive Rate):** 4.5% (목표 5% 이하 달성)
    - **미탐율 (False Negative Rate):** 5.5% (목표 5% 이하 미달)

- **ROC 커브 및 Confusion Matrix**
    - 시각화 자료 포함

- **설명 가능한 AI (XAI) 분석** 
    - SHAP(SHapley Additive exPlanations) 값 분석 결과,
    - 납땜기 온도 변화율, 냉각수 유량, 금속 조성 비율이 결함 예측에 가장 큰 영향을 미치는 것으로 나타남

### 4.3 실제 환경 검증 (Shadow Testing) 결과 (ISO 9001 8.5 생산 및 서비스 제공)

- **기간**
    - 2주 (2026.02.01 ~ 2026.02.14)

- **방식**
    - AI 모델은 실제 생산 라인에 배포되었지만, 그 예측 결과는 현장 제어에 직접 사용되지 않고 병렬적으로 예측 데이터를 생성
    - 현장 엔지니어와 품질 관리팀이 AI 예측과 실제 결함 발생 여부를 비교

- **결과**
    - AI 예측을 통한 잠재적 불량 건수: 50건 (2주간)
    - 실제 발생한 불량 건수: 20건 (그 중 15건은 AI가 정확히 예측)
    - AI 예측 경보가 없었으나 실제 발생한 불량: 5건 (미탐)
    - AI가 불량으로 예측했으나 실제로는 불량이 아니었던 경우: 35건 (오탐)

- **현장 피드백**
    - AI 예측의 오탐율이 높아 현장 작업자들의 신뢰도가 다소 낮아질 우려 있음

### 4.4 품질 기록 관리 (ISO 9001 7.5 문서화된 정보)

- AI 모델의 모든 훈련 데이터셋, 테스트 데이터셋, 코드, 하이퍼파라미터 설정 값, 모델 성능 지표는 클라우드 기반 MLOps 플랫폼에 버전별로 저장 및 관리
- Shadow Testing 기간 동안 AI 예측 결과와 실제 불량 발생 여부 기록은 MES 시스템 내 'AI 품질 예측 로그' 모듈에 자동 기록 및 QMS 디지털 플랫폼과 연동

---

## 5. 개선 및 조치 단계 (ACT)

### 5.1 문서 정보

| 문서명 | AI 주조 결함 예측 시스템 개선 계획서 및 관리 절차서 |
| :--- | :--- |
| 문서번호 | QMS-AI-ACT-001 |
| 버전 | 1.0 |
| 작성일 | 2026.03.01 |
| 작성자 | 품질관리팀, 데이터 과학자 팀 |
| 승인자 | 품질 담당 이사 |

### 5.2 부적합 및 시정 조치 (ISO 9001 10.2)

- **미탐률 및 예측 정확도 부족**
    - **원인 분석**
        - 기존 AI 모델이 특정 유형의 미세 결함 패턴을 충분히 학습하지 못했거나,
        - 해당 결함에 대한 새로운 공정 변수 데이터가 부족할 가능성

    - **시정 조치**
        1. R&D팀 주관으로 미탐 발생 원인 분석 및 관련 공정 데이터(예: 주조 금형 온도 이력) 추가 수집 검토 (2026.03.15까지)
        2. 추가 데이터 확보 및 모델 아키텍처 최적화를 통한 AI 모델 재학습 및 성능 개선 (2026.04.15까지)

- **오탐률로 인한 현장 피로도**
    - **원인 분석**
        - AI 모델이 예측한 경미한 이상 현상이 실제 품질 문제로 이어지지 않는 경우가 많아 현장 작업자의 신뢰도 저하

    - **시정 조치**
        1. AI 예측 결과에 대한 경고 등급을 세분화 (주의/경고/위험)하고, MES에서 현장 알림 기준을 조정 (2026.03.31까지)
        2. AI 예측 경고에 대한 현장 작업자 대응 가이드라인 재정비 및 교육 강화 (AR 기반 교육 활용) (2026.04.30까지)

### 5.3 지속적 개선 (ISO 9001 10.3)

- **AI 모델 재학습 및 배포 절차 확립 (관리 문서)**
    - **목적** 
        - AI 모델 성능을 지속적으로 최적화하고 안정적으로 배포하기 위한 표준 절차 정의

    - **주요 내용**
        - 데이터 품질 검증 기준 및 주기
        - 모델 재학습 트리거 (예: 성능 지표 하락 시, 신규 공정 도입 시)
        - 모델 버전 관리 및 롤백(Rollback) 절차
        - 새로운 모델 배포 전 성능 검증 및 승인 절차
        - 배포 후 모니터링 및 현장 피드백 반영 메커니즘

- **스마트 품질경영 프로세스 매뉴얼 업데이트**
    - AI 모델링 및 검증 활동을 반영하여 기존 '스마트 품질경영 프로세스 매뉴얼'의 관련 섹션 업데이트
        - 예: 공정 관리, 성과 평가, 개선

### 5.4 관리 문서 작성 및 개정 (ISO 9001 7.5 문서화된 정보)

- **새로운 관리 문서 작성**
    - QMS-AI-OP-002 'AI 기반 주조 결함 예측 시스템 운영 표준 절차서'
    - QMS-AI-WI-001 'AI 예측 경보 현장 대응 작업 지시서'
    - QMS-AI-MN-001 'AI 모델 재학습 및 성능 관리 가이드'

- **기존 관리 문서 개정**
    - QMS-PR-001 '주조 공정 관리 절차서'에 AI 예측 시스템 연동 내용 추가
    - QMS-QM-001 '품질 검사 및 모니터링 절차서'에 AI 기반 모니터링 기준 반영

### 5.5 경영 검토 준비 (ISO 9001 9.3)

- 위 모든 분석 결과, 개선 조치 내용, 문서화 현황 등을 포함한 'AI 기반 주조 결함 예측 시스템 1차 성과 보고서'를 품질 담당 이사 및 CTO에게 보고
- 경영 검토 시 AI 시스템 도입에 따른 재무적 성과(리워크 비용 절감, 생산 효율성 증대)와 더불어, 작업 환경 변화(오탐률로 인한 피로도) 등 인적 요소도 함께 논의하여 지속 가능한 품질경영 방향 설정

---

